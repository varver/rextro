<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Rextro by varver</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Rextro</h1>
        <h2>Rextro is an golang api consumer,make api calls easily using this library and specially read json response easily.</h2>
        <a href="https://github.com/varver/rextro" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="rextro" class="anchor" href="#rextro" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rextro</h1>

<p><a href="https://github.com/varver/rextro">Rextro</a> is a simple api consumer in golang (go) , make api calls easily using this library.
Easily read json response values like : <strong>response.success</strong> if response looks like : 
<strong>{"response" : {"success" : true, "error" : "none" , "code" : "200"}}</strong></p>

<p>See examples below for better understanding and usage.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<pre><code>go get -u -v github.com/varver/rextro
</code></pre>

<h1>
<a id="how-to-use-" class="anchor" href="#how-to-use-" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to Use ?</h1>

<p>For example lets say you want to use this api : 
<a href="https://www.mashape.com/imagevision/nudity-recognition-nudity-filter-for-images">https://www.mashape.com/imagevision/nudity-recognition-nudity-filter-for-images</a></p>

<p><strong>The curl request looks like this</strong></p>

<pre><code>curl -X POST --include 'https://nuditysearch.p.mashape.com/nuditySearch/image' \
  -H 'X-Mashape-Key: ad40Z3nH9NmdfgdfgfdgdfgfdgdfgfdgfdgfdgdfgfgAum8J6' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'Accept: application/json' \
  -d 'objecturl=http://i.imgur.com/4hGni1I.jpg' \
  -d 'setting=3'
</code></pre>

<p><strong>Json Response looks like this</strong></p>

<pre><code>{
  "version": "config_v8_2014-01-31",
  "message": "SUCCESS",
  "transactionid": "1234",
  "objecturl": "http://i.imgur.com/4hGni1I.jpg",
  "setting": 2,
  "score": 94,
  "classification": "NUDITY"
}
</code></pre>

<p><strong>This is how the code will look like to make above call</strong></p>

<pre><code>package main

import (
    "fmt"
    "github.com/varver/rextro"
)

func Mashape(image string, api_key string) {
    req := rextro.NewTequest("https://nuditysearch.p.mashape.com/nuditySearch/image")

    //headers to be sent
    req.Headers["X-Mashape-Key"] = api_key
    req.Headers["Content-Type"] = "application/x-www-form-urlencoded"
    req.Headers["Accept"] = "application/json"

    // parameters to be sent
    req.Body["setting"] = "2"
    req.Body["objecturl"] = image

    // get response as json converted // you can also make 'GET' request instead of 'POST'
    container, err := req.FetchJson("POST")
    if err != nil {
        fmt.Println(err.Error())
        return
    }

    fmt.Println(container.String())

    /*
        // use this to get raw response as byte array
        // byteArray , err := req.Fetch("POST")

        // OR

        // use this to get response as a string
        // respString , err := req.FetchString("POST")

        // The Request is internally done using https://godoc.org/net/http#NewRequest
    */

    //////////////////////////////////////////////////////////////////
    /// Lets fetch json values from Response looks like this ////////
    /////////////////////////////////////////////////////////////////
    /*
        {
          "version": "config_v8_2014-01-31",
          "message": "SUCCESS",
          "transactionid": "1234",
          "objecturl": "http://i.imgur.com/4hGni1I.jpg",
          "setting": 2,
          "score": 94,
          "classification": "NUDITY"
        }
    */

    message := container.Path("message").Data().(string)
    if message == "SUCCESS" {
        fmt.Println(container.Path("classification").Data().(string))
    } else {
        fmt.Print("Something went wrong")
    }

}

func main() {
    key := "YOUR_API_KEY"
    image_url := "http://i.imgur.com/4hGni1I.jpg"
    Mashape(image_url, key)
}

</code></pre>

<h1>
<a id="note" class="anchor" href="#note" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note</h1>

<p>The package internally uses : <a href="https://github.com/Jeffail/gabs">https://github.com/Jeffail/gabs</a> to parse json , you can refer its godoc here : <a href="https://godoc.org/github.com/Jeffail/gabs">https://godoc.org/github.com/Jeffail/gabs</a> to do more stuff on FetchJson output , as it returns the <a href="https://godoc.org/github.com/Jeffail/gabs#Container">Container</a> of gabs package. </p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/varver/rextro/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/varver/rextro/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/varver/rextro"></a> is maintained by <a href="https://github.com/varver">varver</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
